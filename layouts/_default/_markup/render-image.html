{{/* https://gohugo.io/templates/render-hooks/ */}}
{{/* Ref: https://sebastiandedeyne.com/captioned-images-with-markdown-render-hooks-in-hugo/ */}}
{{- $custom_width := (.Title | replaceRE `.*=(\d*)x.*` `${1}`) -}}
{{- $text := .Text | safeHTML -}}
<figure class="gphoto-media center">
    <div class="img-container center">
        <noscript>
            <img src="{{ .Destination | safeURL }}" oncontextmenu="return false;" class="center img-zoomable" alt='{{ $text }}' data-action="zoom"
                title='{{ $text }}'>
        </noscript>
        <img data-sizes="auto"
        src="https://dummyimage.com/600x400/666/fff&text=wait" data-src="{{ .Destination | safeURL }}" oncontextmenu="return false;" class="center img-zoomable lazyload" alt='{{ $text }}' style="display: block;"
            {{ with $custom_width }} width="{{ . }}"{{ else }}width="400"{{ end }} data-action="zoom" title='{{ $text }}' />
    </div>
    <figcaption class="center" style="max-width:{{ with $custom_width }}{{ . }}{{ else }}400{{ end }}px;">
        <center class="caption-text" style="margin: 0 .3rem 0;">
            <p style="margin: .5rem 0 0;">{{ $text }}</p>
            <font class="douyin hover-show">
                <a href="{{ .Destination | safeURL }}" target="_blank" rel="noreferrer noopener"
                    style="opacity: 1.0; text-decoration: none;">OuO</a>
            </font>
        </center>
    </figcaption>
</figure>